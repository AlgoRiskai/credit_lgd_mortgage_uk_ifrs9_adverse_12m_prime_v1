# Load datasets
loan_data = pd.read_csv("loan_data.csv")  # Loan-level attributes
arrears_data = pd.read_csv("arrears_data.csv")  # Default status
macro_data = pd.read_csv("macro_data.csv")  # Economic forecasts

# Merge datasets on loan ID and date
data = loan_data.merge(arrears_data, on="loan_id").merge(macro_data, on="date")

# Define LGD target variable (loss given default percentage)
data["LGD"] = data["recovery_amount"] / data["exposure_at_default"]

# Define segmentation variables
segments = ["Owner_vs_BTL", "Repayment_vs_IO", "LTV_band", "Region", "Vintage"]
